# Jio-Azure IoT platform API Document
___
## User Management
___
### 1. Authentication
___

### 1.1. Login


This API is used to login an existing User in Ecosystem.
This API will return Authorization token, along with user_id which can be used subsequent requests till logout.

**URL** : `/api/v1-jio-iot/users/login`

**Method**: `POST`

**Headers**:

|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

 **Request Body**:

    {
        "mobile": "{user-registered-mobile-no}",
        "password": "{user-created-password}",
        "fcmToken" : "{FCM Token given by GCM project}"
    }


  ***Parameters***

| Parameters  | Description                                     |Type      |M/O|
|-------------|-------------------------------------------------|-----------|---|
|mobile       |Mobile number of the user                        | String          |                M                  ||
|password     |Password for the account                         | String          |M
|appServiceType| Application Service type| string| M

**Success Responses**

****Code****: ****200****, RES_OK

****Content****:

    {
        "Authorization": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJtb2JpbGUiOiI4MmRmZ2hqayIsInBhc3N3b3JkIjoieHl6IXh5eiIsInRpbWVzdGFtcCI6IjE1NDUyMDE5MDMifQ.abtXA_KpujkSz9_fq3vmwcM6_v0QimGu6IIWxRvrtF8",
        "message": "Logged In Successfully",
        "status": 200,
        "userId": "9b24d81283ca4c0196c609dfcd2f1d13",
        "role" : "storeLead",
        "acp":{object defining policies governed by role}
    }

| Parameters  | Description                                     |Type      |M/O|
|-------------|-------------------------------------------------|-----------|---|
|Authorization| Auth Token generated by platform| string| M
|message|Reason for the status code| string|M
|status| Error code indication success/failure| HTTP status codes| M
|userId| Identification for logged In user| string |M
|role| Role associated with user| string | M
|acp| Access Control Policies assigned role| JSON Object| M

 **Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|User Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

 ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        "status" : {error-code},
        "message": "{message-for-error-code}"
    }

### 1.2. Logout
API used for terminating session of the user

**URL** : `/v1-jio-iot/users/{user-id}/logout`

**Method**: `POST`

**Headers**:

|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Authorization| {Auth Token shared during login}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

**Success Responses**

****Code****: ****200****, RES_OK

    {
        "status" : 200,
        "message": "Logged out Successfully"
    }

**Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|User Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

 ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        "status" : {error-code},
        "message": "{message-for-error-code}"
    }

### 2. User activity
---

### 2.1. Get all devices


## Device Management
___

### 1.
### User Location Management
---
#### 1. Retrieve all locations

**URL** : `/v1-jio-iot/users/{user-id}/locations`

**Method**: `GET`

**Headers**:
|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Authorization|{Authorization key sent during login}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

**Success Responses**

****Code****: ****200****, RES_OK

****Content****:

    {
        "ownedDevices":[],
        "sharedDevices":[]
    }

 **Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|Resource Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

  ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        'message': 'Invlid Syntax or data'
    }

#### 2. Create Location

**URL** : `/v1-jio-iot/users/{user-id}/locations`

**Method**: `POST`

**Headers**:
|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Authorization|{Authorization key sent during login}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

**Success Responses**

****Code****: ****200****, RES_OK

****Content****:

    {
        "ownedDevices":[],
        "sharedDevices":[]
    }

 **Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|Resource Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

  ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        'message': 'Invlid Syntax or data'
    }

#### 3. Update location

**URL** : `/v1-jio-iot/users/{user-id}/locations/{location-id}`

**Method**: `PATCH`

**Headers**:
|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Authorization|{Authorization key sent during login}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

**Success Responses**

****Code****: ****200****, RES_OK

****Content****:

    {
        "ownedDevices":[],
        "sharedDevices":[]
    }

 **Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|Resource Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

  ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        'message': 'Invlid Syntax or data'
    }

#### 4. Delete location

**URL** : `/v1-jio-iot/users/{user-id}/locations/{location-id}`

**Method**: `DELETE`

**Headers**:
|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Authorization|{Authorization key sent during login}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

**Success Responses**

****Code****: ****200****, RES_OK

****Content****:

    {
        "ownedDevices":[],
        "sharedDevices":[]
    }

 **Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|Resource Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

  ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        'message': 'Invlid Syntax or data'
    }

#### 5. Retrieve specified location

**URL** : `/v1-jio-iot/users/{user-id}/locations/{location-id}`

**Method**: `GET`

**Headers**:
|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Authorization|{Authorization key sent during login}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

**Success Responses**

****Code****: ****200****, RES_OK

****Content****:

    {
        "ownedDevices":[],
        "sharedDevices":[]
    }

 **Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|Resource Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

  ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        'message': 'Invlid Syntax or data'
    }

### Device Location Management
---
#### 1. Update location of device

**URL** : `/v1-jio-iot/users/{user-id}/devices/{device-id}/property`

**Method**: `PATCH`

**Headers**:
|Header|Value|
|---|---|
|Ocp-Apim-Subscription-Key|{Azure API Management Service Token}|
|Authorization|{Authorization key sent during login}|
|Content-Type|application/json|
|X-Request-ID|{Random Generated ID}|

**Success Responses**

****Code****: ****200****, RES_OK

****Content****:

    [
        {
            "property_name": "armState",
            "property_value": "OFF"
        }
    ]

 **Error Response**

 |Error Code|Description|Message|
 |---|---|---|
 |400|BAD_REQUEST|Invalid Syntax or Data|
 |401|UNAUTHORIZED|Authorization Failed|
 |404|NOT_FOUND|Resource Not Found|
 |405|METHOD_NOT_ALLOWED|Requested Method Not Allowed|
 |415|UNSUPPORTED_MEDIA|Unsupported Media Type|

  ****Example****

 ****Code****: ****400****, BAD_REQUEST

 ****Content****:

    {
        'message': 'Invlid Syntax or data'
    }